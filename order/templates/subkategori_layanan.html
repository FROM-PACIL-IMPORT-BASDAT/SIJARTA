{% extends "base.html" %}

{% block meta %}

<style>
    button {
        border-width: 1px;
        border-color: rgb(209 213 219);
        text-align: center;
        transition: all 0.2s ease;
        }

    button:hover {
        background-color: rgb(209 213 219);
    }

    button:active {
        transform: scale(0.95);
    }
</style>

{% endblock meta %}

{% block body %}

<div class="overflow-x-hidden p-4 relative flex flex-col items-center justify-center mt-8">
    <div class="relative flex flex-col gap-4 w-full md:w-1/2">
        <div class="flex flex-row justify-between mb-4">
            <div class="text-center py-2 px-4 border border-gray-300">{{ subkategori }}</div>
            <div class="text-center py-2 px-4 border border-gray-300">Kategori</div>
        </div>
        <div>
            <h2>Deskripsi</h2>
            <div class="w-full py-2 px-4 mt-2 border border-gray-300">Deskripsi</div>
        </div>
        <div class="mb-4">
            <h2>Pilihan Sesi Layanan</h2>
            <div class="p-2 border border-gray-300 flex flex-row justify-between mt-2">
                <div class="grid grid-cols-2 pr-2">
                    <p class="pr-2">Sesi Layanan</p>
                    <p class="pl-2 border-l border-gray-300">Harga</p>
                </div>
                <!-- % if user.role == 'Pengguna' % -->
                <a>
                    <button id="pesan" class="px-4">Pesan</button>
                </a>
                <!-- % endif % -->
            </div>
        </div>
        <div class="mb-4">
            <h2>Pekerja</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-2  mt-2">
                <a><!-- href="{% url 'accounts:profile' %}"> -->
                    <button class="overflow-x-auto h-full w-full p-2">Nama Pekerja</button>
                </a>
                <a><!-- href="{% url 'accounts:profile' %}"> -->
                    <button class="overflow-x-auto h-full w-full p-2">Nama Pekerja</button>
                </a>
                <a><!-- href="{% url 'accounts:profile' %}"> -->
                    <button class="overflow-x-auto h-full w-full p-2">Nama Pekerja</button>
                </a>
                <a><!-- href="{% url 'accounts:profile' %}"> -->
                    <button class="overflow-x-auto h-full w-full p-2">tesssssss ssssssssssssssssssssssssssssssssss sssssss</button>
                </a>
                <a><!-- href="{% url 'accounts:profile' %}"> -->
                    <button class="overflow-x-auto h-full w-full p-2">Nama Pekerja</button>
                </a>
            </div>
        </div>
        <!-- % if user.role == 'Pekerja' % -->
        <div class="mb-4 flex items-center justify-center">
            <button class="border border-gray-300 px-4 py-2 w-fit">Button Bergabung</button>
        </div>
        <!-- % endif % -->
        <div class="mb-4">
            <h2>Testimoni</h2>
            <div class="w-full p-2 border border-gray-300 mt-2">
                <div class="flex flex-row justify-between">
                    <h3 class="overflow-hidden">Nama Pengguna</h3>
                    <h3>Tanggal</h3>
                </div>
                <div class="flex flex-col md:flex-row justify-between">
                    <h3 class="text-left w-full md:w-3/5">Teks Testimoni</h4>
                    <h3 class="text-right w-full md:w-1/5">Nama Pekerja</h4>
                </div>
                <h3 class="text-right w-full">Rating</h3>
            </div>
        </div>
    </div>
</div>

<div id="modal" class="fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50 hidden">
    <div class="bg-white p-4 md:w-1/3">
        <h2 class="p-2 mb-2">Pesan Jasa</h2>
        <form id="pesanan" method="GET" class="flex flex-col p-2 gap-4">
            <!-- Tanggal -->
            <div class="flex flex-col md:flex-row justify-between">
                <h2 class="md:w-1/2 text-left">Tanggal Pemesanan:</h2>
                <h2 class="md:w-1/2 text-right">{{ date }}</h2>
            </div>

            <!-- Diskon -->
            <div class="flex flex-col md:flex-row justify-between">
                <h2 class="md:w-1/2 text-left">Diskon:</h2>
                <div class="md:w-1/2">
                    <input type="text" name="diskon" id="diskon" placeholder="Kode Diskon" class="w-full px-2 border border-gray-300" required>
                </div>
            </div>

            <!-- Total Harga -->
            <div class="flex flex-col md:flex-row justify-between">
                <h2 class="md:w-1/2 text-left">Total Harga:</h2>
                <input type="hidden" name="harga" id="harga" value="0">
                <h2 class="md:w-1/2 text-right">Rpxxx</h2>
            </div>

            <!-- Metode Pembayaran -->
            <div class="flex flex-col md:flex-row justify-between">
                <h2 class="md:w-1/2 text-left">Metode Pembayaran:</h2>
                <div class="md:w-1/2">
                    <select id="bayar" name="bayar" class="block w-full px-2 border border-gray-300 focus:outline-none focus:ring-2 transition duration-200" required>
                        <option value="" disabled selected>Metode</option>
                        {% for met in metode %}
                            <option value="{{ met }}">
                            {{ met }}
                            </option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <!-- Filter Button -->
            <div class="flex items-center justify-center mb-4">
                <button id="create" class="px-2">Pesan Jasa</button>
            </div>
    </div>
</div>

<script>
    const modal = document.getElementById('modal');
    const pesan = document.getElementById('pesan');
    const create = document.getElementById('create');

    pesan.addEventListener('click', () => {
        modal.classList.remove('hidden');
    });

    modal.addEventListener('click', (event) => {
        if (event.target === modal) {
            modal.classList.add('hidden');
        }
    });

    function addPesanan() {
        document.getElementById("pesanan").reset(); 
        window.location.href = "{% url 'order:my_order' %}";
        return false;
    }
    document.getElementById("create").onclick = addPesanan
</script>

{% endblock body %}